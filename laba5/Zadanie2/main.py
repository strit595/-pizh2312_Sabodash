from ticket_module import ПроезднойБилет, БилетОрганичением, БилетОрганичениемПоездок, TicketDatabase

def main():
    print("Тестирование классов билетов с базой данных\n")

    # Создание базы данных
    db = TicketDatabase()

    # Создание билетов
    билет1 = ПроезднойБилет("P001")
    билет2 = БилетОрганичением("T002", 7)
    билет3 = БилетОрганичениемПоездок("T003", 5)

    # Добавление билетов в базу
    db.добавить_билет(билет1)
    db.добавить_билет(билет2)
    db.добавить_билет(билет3)
    print(f"\nСостояние базы данных:\n{db}")

    # Тестирование методов
    print("\nТестирование билета 1:")
    print(f"Списана поездка: {билет1.списать_поездку()}")
    print(f"Активен? {билет1()}")
    билет1.деактивировать()
    print(f"Активен после деактивации? {билет1()}")
    db.добавить_билет(билет1)  # Обновление в базе

    print("\nТестирование билета 2:")
    print(f"Списана поездка: {билет2.списать_поездку()}")
    print(f"Статус: {билет2.проверить_статус()}")
    print(f"Активен? {билет2()}")

    print("\nТестирование билета 3:")
    print(f"Списана поездка: {билет3.списать_поездку()}")
    print(f"Списана ещё одна поездка: {билет3.списать_поездку()}")
    print(f"Активен? {билет3()}")
    билет3.обновить_баланс(3)
    db.добавить_билет(билет3)

    # Поиск и удаление
    print("\nПоиск билета T002:")
    найденный_билет = db.найти_билет("T002")
    print(f"Найден: {найденный_билет}")
    print("Удаление билета T002:")
    db.удалить_билет("T002")
    print(f"Состояние базы данных после удаления:\n{db}")

if __name__ == "__main__":
    main()